var os = require('os');
var fs = require('fs');
var ifaces = os.networkInterfaces();
var configFile = '../html/config.json';
var config = require(configFile);

// get local IP address
Object.keys(ifaces).forEach(function (ifname) {
    var alias = 0;
    ifaces[ifname].forEach(function (iface) {
        if ('IPv4' !== iface.family || iface.internal !== false) { return; }
        if (alias >= 1) { }
        else {
            ipAddr = iface.address;
            config.network.ip = ipAddr;
            fs.writeFile(configFile, JSON.stringify(config, null, 2), function() {
                console.log("updated config file with IP address", ipAddr);
            });
        }
        ++alias;
    });
});
